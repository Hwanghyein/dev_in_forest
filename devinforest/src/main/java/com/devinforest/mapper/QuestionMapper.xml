<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.devinforest.mapper.QuestionMapper">
	
	<!-- 질문 목록  -->
	<select id="selectQuestionList" resultType="com.devinforest.vo.Question" parameterType="com.devinforest.vo.Question">
		SELECT 
			question_no questionNo,
			member_name memberName,
			question_title questionTitle,
			question_content questionContent,
			question_reputation reputation,
			question_createdate questionCreateDate,
			question_updatedate questionUpdateDate,
			question_ip questionIp
		FROM dev_question
	</select>
	
	<!-- 질문 작성 -->
	<insert id="insertQuestion" parameterType="com.devinforest.vo.Question">
		INSERT INTO 
			dev_question(
				member_name,
				question_title,
				question_content,
				question_reputation,
				question_createdate,
				question_updatedate,
				question_ip
			) VALUES(
				#{memberName},
				#{questionTitle},
				#{questionContent},
				#{reputation},
				NOW(),
				NOW(),
				#{questionIp}
			)
	</insert>
	
	<!-- 상세보기 -->
	<select id="selectQuestionOne" resultType="com.devinforest.vo.Question" parameterType="int">
		SELECT 
			question_no questionNo,
			member_name memberName,
			question_title questionTitle,
			question_content questionContent,
			question_reputation questionReputation,
			question_createdate questionCreateDate,
			question_updatedate questionUpdateDate,
			question_ip questionIp
		FROM dev_question
		WHERE question_no = #{questionNo}
	</select>
	
	<!-- 질문 삭제 -->
	<delete id="deleteQuestion" parameterType="int">
		DELETE FROM dev_question
		WHERE question_no = #{questionNo}
	</delete>
	
	<!-- 질문 삭제 후 백업 추가 -->
	<insert id="insertQuestionBack" parameterType="com.devinforest.vo.Question">
		INSERT INTO 
			dev_question(
				member_name,
				question_title,
				question_content,
				question_reputation,
				question_createdate,
				question_updatedate,
				question_ip
			) VALUES(
				#{memberName},
				#{questionTitle},
				#{questionContent},
				#{questionReputation},
				#{questionCreateDate},
				#{questionUpdateDate},
				#{questionIp}
			)
	</insert>
	
</mapper>